![Зачем в `setState()` нужно передавать функцию?](https://youtu.be/GZUy2i6QN7o?t=627)

#### Ответ
Подробнее: [[1.4.3 State - состояние компонента]] , 

В #State хранится состояние (свойства) #React элемента, его можно инициализировать в конструкторе или в теле класса.

Одно из самых важных аспектов #React заключается в том, чтобы обновить state используют #setState()

Функция #setState может принимать в виде аргумента функцию, этот аргумент - текущий state.

~~~
this.setState( (state)  => {
	return {
		count: state.count 1}
});
~~~

Происходит асинхронное обновление состояния state в зависимости от предыдущего значения.

Во-первых, если был вызван setState, то React захочет объединить объект, который вы отправили в setState с текущим состоянием компонента. Это позволит начать процесс согласования. Конечной целью согласования является обновление пользовательского интерфейса на основе его нового состояния наиболее эффективным из возможных способов. Для этого React сформирует новое дерево элементов (которое можно рассматривать как объектное представление вашего пользовательского интерфейса). Как только React получает это дерево, чтобы выяснить как интерфейс должен измениться в ответ на новое состояние, React сравнит новое дерево с предыдущим деревом элементов. В этом процессе, React узнает точные изменения, которые произошли. Зная эти изменения, React получит возможность провести изменения в интерфейсе только там, где это необходимо и этим минимизировать количество изменений.

> Какой второй аргумент можно передать опционально в setState и какова его цель?

Функция обратного вызова, которая будет вызываться после выполнения функции setState и отрисовки компонента.

Мы еще не поговорили о том, что это setState является асинхронным, поэтому он принимает вторым параметром функцию обратного вызова. Как правило, лучше использовать другой метод, а не полагаться на эту функцию обратного вызова. Но нужно знать, что эта возможность есть.

this.setState(  
  { username: 'tylermcginnis33' },  
  () => console.log('setState has finished and the component has re-rendered.')  
)
____
#react

____

#### [[004 React + Redux|Назад]]