#### Ответ

Reflow и repaint - это процессы, связанные с перерисовкой и обновлением элементов на веб-странице в браузере.

- **Перерасчет (reflow):**  
    Перерасчет (или перекомпоновка) носит более значительный характер. Это событие будет происходить всякий раз, когда происходят манипуляции с DOM-деревом HTML документа, или когда стиль, который влияет на расположение, изменяется у элемента, это событие будет происходит всякий раз, когда атрибут class у элемента изменяется, или всякий раз, когда изменяется размер окна браузера. Цель перерасчета в том, чтобы определить, где различные части сайты теперь должны отображаться. Если вы измените родительские свойства, тогда его потомки также будут пересчитаны. Элементы, которые появляются после того, как DOM было сформировано, будут сформированы заново. Если изменяется дочерний элемент, тогда будет пересчитан и родительский элемент, чтобы учесть изменения своих потомков. Затем, происходит переотрисовка.
    
    Перерасчет также очень дорого обходится в плане производительности, и является одной из главных причин медленной работы скриптов, особенно на устройствах с низкой вычислительной мощности, таких как телефоны

- **Переотрисовка (repaint):**  
    Также известное, как redraw — это событие, которое происходит всякий раз, когда что-то делается видимым на странице, если ранее оно было скрыто (visibility:hidden, overflow:hidden, display:none, и др), или наоборот (visibility:visible, overflow:auto, display:static, и др), когда происходят какие-то изменения в макете. Примером может быть что угодно: добавление к элементу рамки, изменение цвета фона, изменение видимости стилей — все это приводит к переотрисовке страницы. Тем самым данное событие может дорого вам обойтись в плане производительности, так как нагружает браузерный движок поиском, проходами по всем элементам, чтобы определить, что является видимым уже, а что должно отобразиться.
    
 - **Минимальный перерасчет (minimal reflow):**  
    
    Долгий перерасчет может повлиять на весь документ, всю веб-страницу. Чем больше документ, тем дольше перерасчет. Меньше HTML-кода лучше производительность. Элементы с абсолютным позиционирование или фиксированным, не влияют на структуру главного документа, так как они находятся в отдельном потоке, если в них произошли изменения, только они будут подвержены перерасчету. Конечно, документ, в котором произойдут изменения, все равно будут полностью переотрисованы, но эта проблема имеет слабый характер, чем перерасчет всего DOM-дерева.
    
    Так что анимация не должны быть применена ко всему документу, было бы лучшим, если бы анимации применялись только для позиционированных элементов. Для большинства случаев, это очень важно.

- **Что вызывает перерасчет:**  
    - Изменение размера окна
    - Изменение шрифта
    - Добавлении или удалении стилей
    - Динамическое изменение, пользователь вводит текст в поле ввода
    - Активация CSS псевдо-классов, к примеру, событие :hover
    - Манипулирования с атрибутом class
    - Сценарии манипулирования с DOM-деревом
    - Расчет значений offsetWidth и offsetHeight
    - Задание свойств в атрибут style

- **Как свести к минимуму влияние перерасчета на производительность:**  
    - Изменение атрибутов класса у элементов, делайте как можно реже (минимум манипуляций в DOM-дереве).
    - Избегайте установки нескольких встроенных стилей.
    - Применяйте анимацию к элементам, которые имеют фиксированное или абсолютное позиционирование.
    - Избегайте табличной разметки. Даже незначительные изменения в ячейке таблицы вызовут перерасчет на всех остальных узлах таблицы.
    - Не используйте «CSS expressions» (также известное, как «IE expressions»)

- **Примечание:**  
    Потеть над селекторами, используемых в современных браузерах, бесполезно. Большинство методов выборки сейчас настолько быстрые и эффективные, что на это действительно не стоит тратить много времени. Кроме того, есть различия в различных браузерах, и у каждого есть свои медленные селекторы.
    
    Чрезмерные неиспользуемые стили, скорее всего, они будут бить по производительность, чем любые селекторы, которые вы добавили в свой документ. Следует прибираться в своих css-стилях. 3000 строк неиспользуемых или избыточных на странице стилей, в наше время, это не редкость. Если разные стили используются на разных страницах вашего сайта, разбейте ваш один и единственный styles.css на несколько дополнительных, это будет лучшим вариантом.

Подробней: [Repaints & Reflows](https://habrahabr.ru/post/273471/#repaints_and_reflows)

___
#CSS #reflow #repaint 

___

#### [[002 CSS|Назад]]