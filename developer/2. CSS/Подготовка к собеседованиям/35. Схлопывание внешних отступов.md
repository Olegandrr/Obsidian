# 35. Схлопывание внешних отступов

Отступы [margin-top](https://developer.mozilla.org/ru/docs/Web/CSS/margin-top) и [margin-bottom](https://developer.mozilla.org/ru/docs/Web/CSS/margin-bottom) иногда объединяются в один, с размером равным наибольшему из них (или размеру одного, если они равны). Это поведение известно как **схлопывание внешних отступов (margin collapsing).** Обратите внимание, что отступы [плавающих](https://developer.mozilla.org/ru/docs/Web/CSS/float) и [абсолютно позиционированных](https://developer.mozilla.org/ru/docs/Web/CSS/position#absolute) элементов никогда не схлопываются.

Схлопывание внешних отступов происходит в трёх случаях:

Соседние элементы (siblings)

Схлопываются отступы соседних элементов (за исключением случая, когда к последнему элементу применено свойство [`clear`](https://developer.mozilla.org/ru/docs/Web/CSS/clear)).

Родительский и первый/последний дочерние элементы

Если отсутствуют границы (border), внутренние отступы (padding), строчное содержимое (inline/inline-block) или промежуток для отделения [`margin-top`](https://developer.mozilla.org/ru/docs/Web/CSS/margin-top) родительского элемента, от [`margin-top`](https://developer.mozilla.org/ru/docs/Web/CSS/margin-top) одного или нескольких его дочерних элементов/блоков или отсутствуют границы (border), внутренние отступы (padding), строчное содержимое (inline/inline-block), [`height`](https://developer.mozilla.org/ru/docs/Web/CSS/height), [`min-height`](https://developer.mozilla.org/ru/docs/Web/CSS/min-height) или [`max-height`](https://developer.mozilla.org/ru/docs/Web/CSS/max-height) для отделения отступов [`margin-bottom`](https://developer.mozilla.org/ru/docs/Web/CSS/margin-bottom) родительского блока от [`margin-bottom`](https://developer.mozilla.org/ru/docs/Web/CSS/margin-bottom) отступов одного или нескольких его дочерних элементов/блоков, то внешние отступы схлопываются. Схлопнутые отступы заканчиваются за пределами родительского элемента.

Пустые блоки

Если отсутствуют границы (border), внутренние отступы (padding), строчное содержимое (inline/inline-block), [`height`](https://developer.mozilla.org/ru/docs/Web/CSS/height) или [`min-height`](https://developer.mozilla.org/ru/docs/Web/CSS/min-height) для отделения [`margin-top`](https://developer.mozilla.org/ru/docs/Web/CSS/margin-top) верхнего отступа этого блока от его [`margin-bottom`](https://developer.mozilla.org/ru/docs/Web/CSS/margin-bottom) нижнего отступа, то верхние и нижние внешние отступы этого блока схлопываются.

**На заметку:**

- Более сложное схлопывание отступов (более, чем двух) происходит, когда описанные случаи сочетаются.
- Эти правила применяются даже к отступам, равным 0, поэтому отступ первого/последнего дочернего элемента заканчивается за пределами его родителя (согласно правилу выше) независимо от того, равен ли отступ родителя нулю.
- При использовании отрицательных отступов, размер схлопнутого отступа вычисляется, как сумма наибольшего положительного и наименьшего отрицательного (наибольшего по модулю) отступа.
- Если все отступы отрицательные, размер схлопнутого отступа равен наименьшему (наибольшему по модулю) отступу. Это относится как к вложенным элементам, так и к соседним.
- Внешние отступы [плавающих](https://developer.mozilla.org/ru/docs/Web/CSS/float) и [абсолютно позиционируемых](https://developer.mozilla.org/ru/docs/Web/CSS/position) элементов никогда не схлопываются.