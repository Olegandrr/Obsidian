# 65. Рекурсия

Рекурсия – это приём программирования, полезный в ситуациях, когда задача может быть естественно разделена на несколько аналогичных, но более простых задач. Или когда задача может быть упрощена до несложных действий плюс простой вариант той же задачи. Или, как мы скоро увидим, для работы с определёнными структурами данных.

В процессе выполнения задачи в теле функции могут быть вызваны другие функции для выполнения подзадач. Частный случай подвызова – когда функция вызывает _сама себя_. Это как раз и называется _рекурсией_.

[Два способа мышления](https://learn.javascript.ru/recursion#dva-sposoba-myshleniya)

В качестве первого примера напишем функцию `pow(x, n)`, которая возводит `x` в натуральную степень `n`. Иначе говоря, умножает `x` на само себя `n` раз.

pow(2, 2) = 4

pow(2, 3) = 8

pow(2, 4) = 16

Рассмотрим два способа её реализации.

1.      Итеративный способ: цикл `for`:

```
2.      
```

```
3.      
```

```
4.      
```

```
5.      
```

```
6.      
```

```
7.      
```

```
8.      
```

```
9.      
```

```
10.  
```

```
11.  
```

```
12.  
```

alert( pow(2, 3) ); // 8

13.  Рекурсивный способ: упрощение задачи и вызов функцией самой себя:

```
14.  
```

```
15.  
```

```
16.  
```

```
17.  
```

```
18.  
```

```
19.  
```

```
20.  
```

```
21.  
```

alert( pow(2, 3) ); // 8

Обратите внимание, что рекурсивный вариант отличается принципиально.

Когда функция `pow(x, n)` вызывается, исполнение делится на две ветви:

```
              
```

```
             
```

pow(`x`, `n`) =

```
             \
```

```
              
```

1.      Если `n == 1`, тогда всё просто. Эта ветвь называется _базой_ рекурсии, потому что сразу же приводит к очевидному результату: `pow(x, 1)` равно `x`.

2.      Мы можем представить `pow(x, n)` в виде: `x * pow(x, n - 1)`. Что в математике записывается как: `xn = x * xn-1`. Эта ветвь – _шаг рекурсии_: мы сводим задачу к более простому действию (умножение на `x`) и более простой аналогичной задаче (`pow` с меньшим `n`). Последующие шаги упрощают задачу всё больше и больше, пока `n` не достигает `1`.

Говорят, что функция `pow` _рекурсивно вызывает саму себя_ до `n == 1`.

Например, рекурсивный вариант вычисления `pow(2, 4)` состоит из шагов:

1.      `pow(2, 4) = 2 * pow(2, 3)`

2.      `pow(2, 3) = 2 * pow(2, 2)`

3.      `pow(2, 2) = 2 * pow(2, 1)`

4.      `pow(2, 1) = 2`

Итак, рекурсию используют, когда вычисление функции можно свести к её более простому вызову, а его – к ещё более простому и так далее, пока значение не станет очевидно.
