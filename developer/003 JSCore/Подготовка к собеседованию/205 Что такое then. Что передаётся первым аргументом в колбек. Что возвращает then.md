#### 10. Что такое #then? Что передаётся первым аргументом в колбек? Что возвращает then?

Объект `Promise` служит связующим звеном между исполнителем («создающим» кодом или «певцом») и функциями-потребителями («фанатами»), которые получат либо результат, либо ошибку. Функции-потребители могут быть зарегистрированы (подписаны) с помощью методов `.then` и `.catch`.

Наиболее важный и фундаментальный метод – `.then`.

Синтаксис:
~~~
promise.then(   
	function(result) { _/* обработает успешное выполнение */_ },   
	function(error) { _/* обработает ошибку */_ } );`
~~~
1. Первый аргумент метода `.then` – функция, которая выполняется, когда промис переходит в состояние «выполнен успешно», и получает результат.
2. Второй аргумент `.then` – функция, которая выполняется, когда промис переходит в состояние «выполнен с ошибкой», и получает ошибку.

Например, вот реакция на успешно выполненный промис:
~~~
let promise = new Promise(function(resolve, reject) {   
	setTimeout(() => resolve("done!"), 1000); });  // 
	resolve запустит первую функцию, переданную в .then promise.then(   _
	
	result => alert(result), // выведет "done!" через одну секунду_   
	error => alert(error) // не будет запущена );`
~~~
* Выполнилась первая функция.

А в случае ошибки в промисе – выполнится вторая:
~~~
let promise = new Promise(function(resolve, reject) {   
	setTimeout(() => reject(new Error("Whoops!")), 1000); });  
	// reject запустит вторую функцию, переданную в .then promise.then(   
	result => alert(result), // не будет запущена   _
	error => alert(error) // выведет "Error: Whoops!" спустя одну секунду_ );`
~~~
Если мы заинтересованы только в результате успешного выполнения задачи, то в `then` можно передать только одну функцию:
~~~
let promise = new Promise(resolve => {   
	setTimeout(() => resolve("done!"), 1000); });  _
	promise.then(alert); // выведет "done!" спустя одну секунду_`
~~~

___
 #JS 

___

### [[003 JSCore|Назад]]