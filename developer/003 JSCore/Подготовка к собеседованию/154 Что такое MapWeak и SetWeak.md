#### Ответ

*WeakMap* – предотвращает удаление обьектов сборщиком мусора, когда эти обьекты выступают в качестве ключей.

1. В основном, `WeakMap` используется в качестве _дополнительного хранилища данных_.
2. Другая частая сфера применения – это кеширование, когда результат вызова функции должен где-то запоминаться («кешироваться») для того, чтобы дальнейшие её вызовы на том же объекте могли просто брать уже готовый результат, повторно используя его. 
   Для хранения результатов мы можем использовать `Map`

Коллекция *`WeakSet`* ведёт себя похоже:

-   Она аналогична `Set`, но мы можем добавлять в `WeakSet` только объекты (не примитивные значения).
-   Объект присутствует в множестве только до тех пор, пока доступен где-то ещё.
-   Как и `Set`, она поддерживает `add`, `has` и `delete`, но не `size`, `keys()` и не является перебираемой.

Будучи «слабой» версией оригинальной структуры данных, она тоже служит в качестве дополнительного хранилища. Но не для произвольных данных, а скорее для значений типа «да/нет». Присутствие во множестве `WeakSet` может что-то сказать нам об объекте.

`WeakMap` – это `Map`-подобная коллекция, позволяющая использовать в качестве ключей только объекты, и автоматически удаляющая их вместе с соответствующими значениями, как только они становятся недостижимыми иными путями.
`WeakSet` – это `Set`-подобная коллекция, которая хранит только объекты и удаляет их, как только они становятся недостижимыми иными путями.

Обе этих структуры данных не поддерживают методы и свойства, работающие со всем содержимым сразу или возвращающие информацию о размере коллекции. Возможны только операции на отдельном элементе коллекции.
`WeakMap` и `WeakSet` используются как вспомогательные структуры данных в дополнение к «основному» месту хранения объекта. Если объект удаляется из основного хранилища и нигде не используется, кроме как в качестве ключа в `WeakMap` или в `WeakSet`, то он будет удалён автоматически.

Подробнее: https://learn.javascript.ru/weakmap-weakset

___
 #JS #WeakMap #WeakSet

___

### [[003 JSCore|Назад]]