#### 2. Где исполняются асинхронные функции?

При вызове какой-то функции она попадает в так называемый стек вызовов.

#stack  — это структура данных, в которой элементы упорядочены так, что последний элемент, который попадает в стек, выходит из него первым _(LIFO: last in, first out)._ Стек похож на стопку книг: та книга, которую мы кладём последней, находится сверху.

В стеке вызовов хранятся функции, до которых дошёл интерпретатор, и которые надо выполнить.

Теперь посмотрим, как ведёт себя стек вызовов при работе с асинхронным кодом:
~~~
function main() {   
	setTimeout(function greet() {     
		console.log('Hello!')   }, 2000)    
	
	console.log('Bye!') }  main()`
~~~
Вызываем функцию `main()`. 
Стек: `main();`

Вызываем `setTimeout()`. 
Стек: `setTimeout(); main();`

`setTimeout` завершился, он выходит из стека:
`main();`

Вызываем `console.log('Bye!')`:
`console.log('Bye!'); main();`
Его вызов завершён, он выходит из стека:

`main();`
Вызов `main()` тоже завершён, стек становится пуст.

Проходит около 2 секунд, вызывается функция `greet()`, она попадает в стек:
`greet();`

Она вызывает `console.log('Hello!')`:
`console.log('Hello!'); greet();`

Отработав, она уходит из стека:
`greet();`

После выполнения всего блока стек снова становится пустым.

___
 #JS 

___

### [[003 JSCore|Назад]]