![Разница между `useEffect()` и `componentDidMount()`?](https://youtu.be/xZLxdts7ZW4?t=754)

#### Ответ

![[Pasted image 20230704185706.png|600]]

`useEffect()` и `componentDidMount()` - это методы жизненного цикла в React, которые позволяют обрабатывать эффекты после монтирования компонента. 

Однако, есть некоторые различия между этими двумя методами:

##### componentDidMount()

1. `componentDidMount()` - это метод жизненного цикла, который *вызывается один раз, после того как компонент был вставлен в DOM.* Он выполняет действия, которые связаны с инициализацией компонента, такие как получение данных с сервера или установка слушателей событий. 
2. `componentDidMount()` - *вызывается только один раз, при монтировании компонента.* Если компонент обновился, этот метод не будет вызываться повторно. 
3. `componentDidMount()` - не может использоваться в функциональных компонентах, только в классовых компонентах. 
4. `componentDidMount()` - используется для инициализации компонента и выполнения действий при его монтировании.

##### useEffect()

1. `useEffect()` - это хук, который позволяет выполнять эффекты после каждого рендеринга компонента. *По умолчанию, он выполняется после монтирования компонента*, но также может вызываться после обновления компонента или перед размонтированием. 
2. `useEffect()` - может вызываться после каждого рендеринга компонента, если его зависимости изменились. Если зависимости не изменились, эффект не будет вызываться повторно. 
3. `useEffect()` - может использоваться только в функциональных компонентах и других хуках. 
4. `useEffect()` - используется для выполнения любых эффектов, которые не связаны с инициализацией компонента, таких как обновление заголовка документа, подписка на события или выполнение асинхронных запросов.

##### Как воспроизвести componentDidMount с помощью useEffect?

Хотя для воспроизведения функционала `componentDidMount` можно воспользоваться конструкцией `useEffect(fn, [])`, она не является точным эквивалентом `componentDidMount`. 

*А именно, она, в отличие от `componentDidMount`, захватывает свойства и состояние. Поэтому, даже внутри коллбэка, вы будете видеть исходные свойства и состояние.* %%Если вы хотите увидеть самую свежую версию чего-либо, это можно записать в ссылку `ref`. Но обычно существует более простой способ структурирования кода, поэтому делать это необязательно. Помните о том, что ментальная модель эффектов отличается от той, что применима к `componentDidMount` и к другим методам жизненного цикла компонентов. Поэтому попытка найти точные эквиваленты может принести больше вреда, чем пользы. Для того чтобы работать продуктивно, нужно, так сказать, «думать эффектами». Основа их ментальной модели ближе к реализации синхронизации, чем к реагированию на события жизненного цикла компонентов.%%


____
#React #hooks #componentDidMount #useEffect 

____

#### [[004 React + Redux|Назад]]