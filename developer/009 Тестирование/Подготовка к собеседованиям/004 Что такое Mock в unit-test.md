
![Что такое Fake в unit тестировании?](https://youtu.be/i96lHslBOIc?t=126)

#### Ответ

##### Теория

В unit-тестировании `Mock` (англ. "мок") - это объект, который *имитирует поведение реального объекта и предоставляет специальные методы для проверки вызовов и параметров, передаваемых в эти методы*. Mock обычно используется, когда необходимо проверить, как объект взаимодействует с другими объектами, которые он использует.

Mock может имитировать различные объекты, такие как базы данных, файловые системы, сетевые соединения, а также другие объекты, которые сложно воссоздать в тестовой среде или которые могут повлиять на результаты тестирования.

Mock может быть реализован как самостоятельный класс или как часть другого класса. Он может быть создан вручную или с помощью специальных инструментов.

Использование Mock в unit-тестировании позволяет проверять, как объект взаимодействует с другими объектами, и контролировать его поведение в тестовых условиях. Это позволяет улучшить качество и надежность программного обеспечения, а также ускорить процесс тестирования.

##### Практика

Пример использования Mock в unit-тестировании может быть следующим. Представим, что у нас есть класс `UserRepository`, который зависит от базы данных для получения информации о пользователях. Класс `UserRepository` имеет метод `getUserById`, который принимает на вход идентификатор пользователя и возвращает его данные.

Мы можем создать Mock объект `Database`, который будет имитировать работу базы данных, и затем использовать его для проверки, как `UserRepository` взаимодействует с базой данных.

```jsx
class DatabaseMock {
  getUserById(id) {
    return { id: 1, name: "John" };
  }
}
```

Затем мы можем создать объект `UserRepository` и передать ему в качестве зависимости Mock объект `DatabaseMock`.

```jsx
const userRepository = new UserRepository(new DatabaseMock());
```

Теперь мы можем создать Mock объект с помощью специального инструмента, например, библиотеки `sinon`, и затем использовать его для проверки вызовов метода `getUserById` на объекте `userRepository`.

```jsx
const databaseMock = sinon.mock(new DatabaseMock());
databaseMock.expects("getUserById").once().withArgs(1);

userRepository.getUserById(1);

databaseMock.verify();
```

Таким образом, использование Mock объекта позволяет нам проверять, как объект взаимодействует с другими объектами, и контролировать его поведение в тестовых условиях.

_____
tags: #testing #unit-test #unit-mock 

____

### [[009 Тестирование|Назад]]