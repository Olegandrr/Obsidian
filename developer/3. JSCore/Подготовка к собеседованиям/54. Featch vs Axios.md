# 54. Featch vs Axios

Объём шаблонного кода  
Fetch

```
fetch(
```

```
  
```

```
  .then(
```

// {

//   "userId": 1,

//   "id": 1,

//   "title": "delectus aut autem",

//   "completed": false

// }

▍Axios

```
axios.get(
```

```
  .then(
```

// {

//   "userId": 1,

//   "id": 1,

//   "title": "delectus aut autem",

//   "completed": false

// }

При использовании Fetch приходится иметь дело с двумя промисами. А вот при работе с Axios у нас есть прямой доступ к JSON-результату в свойстве `data` объекта ответа.  
Метод `json()` миксина [Body](https://developer.mozilla.org/en-US/docs/Web/API/Body) принимает поток [Response](https://developer.mozilla.org/en-US/docs/Web/API/Response) и полностью читает его. Он возвращает промис, который разрешается JSON-результатом разбора текста тела запроса.  
Ещё больше шаблонного кода в Fetch приходится использовать при работе с POST-запросами.

▍Fetch

```
fetch(
```

```
  
```

```
  
```

```
    
```

```
    
```

```
  })
```

```
)
```

```
 .then(
```

```
   
```

```
    
```

```
  }
```

```
  .then(
```

```
  .catch(
```

▍Axios

```
axios
```

```
  .post(
```

```
    
```

```
    
```

```
  })
```

```
  .then(
```

```
  
```

Обработка ошибок

▍Fetch  
`fetch(`"https://jsonplaceholder.typicode.com/todos/100000"`)`

```
  
```

```
    
```

```
    
```

```
  })
```

```
  .then(
```

```
  .catch(
```

```
    
```

```
  });
```

// error Error: Not Found

▍Axios

```
axios
```

```
  .get(
```

```
  .then(
```

```
    
```

```
  })
```

```
  .catch(
```

```
    
```

```
  })
```

// error Error: Not Found

Библиотека Axios выдаёт сведения о сетевых ошибках, а API Fetch — нет. Работая с Fetch всегда нужно проверять свойство `response.ok`. Для того чтобы упростить решение данной задачи, проверку этой ошибки можно оформить в виде отдельной функции:  
  

**const** `checkForError =` response => `{`

```
  
```

```
  
```

```
};
```

```
fetch(
```

```
  .then(checkForError)
```

```
  .then(
```

```
  .catch(
```

```
    
```

```
  
```

Отсутствующие возможности

Axios умеет следить за ходом выгрузки данных. Fetch это не поддерживает. Это может стать решающим фактором выбора технологии для тех, кто разрабатывает приложение, позволяющее пользователям выгружать на сервер фотографии или видеофайлы.  
**const** `config` `= {`

```
  
```

```
};
```

```
axios.put(
```

Альтернативные библиотеки

Вот пара альтернатив Axios и API Fetch:  
[Ky](https://github.com/sindresorhus/ky) — миниатюрный и продуманный HTTP-клиент, основанный на `window.fetch`.

- [Superagent](https://www.npmjs.com/package/superagent) — маленькая прогрессивная клиентская HTTP-библиотека, основанная на `XMLHttpRequest`.

Итоги

Чем стоит пользоваться в 2019 году? Это зависит от многого. Например, если вам нужно отслеживать прогресс выгрузки материалов на сервер, то вам лучше всего подойдёт Axios или Superagent. Если вы можете справиться с ограничениями Fetch — тогда вам лучше воспользоваться именно этим API. А для того, чтобы немного улучшить Fetch-код, попробуйте библиотеку-обёртку наподобие Ky.
