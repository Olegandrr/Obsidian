____

tags: #TS

links: [[]]

youtube: 
![Что такое декораторы?](https://youtu.be/TOn-1RrowKE?t=31)

keywords:

_____

Декораторы в TypeScript - это специальные функции, которые могут использоваться для добавления дополнительной функциональности к классам, методам, свойствам и параметрам функций во время выполнения. Декораторы представляют собой паттерн проектирования, который позволяет модифицировать и расширять поведение объектов во время выполнения программы, не изменяя исходный код.

Декораторы могут быть применены к классам, методам, свойствам и параметрам функций, используя символ @ перед именем декоратора. Декораторы могут вызываться в любом порядке и могут принимать параметры.

Например, декоратор класса может использоваться для добавления дополнительных свойств и методов к классу, декоратор метода может использоваться для изменения поведения метода, декоратор свойства может использоваться для добавления дополнительной логики при доступе к свойству, а декоратор параметра функции может использоваться для проверки или изменения значения параметра.

Декораторы могут использоваться для реализации различных функций, таких как логирование, кэширование, валидация, авторизация, сериализация и десериализация объектов и т.д. Декораторы также могут использоваться для создания аспектно-ориентированного программирования (AOP), который позволяет отделить функциональности, которые не относятся к основной логике приложения, от основной логики приложения.

Примеры декораторов в TypeScript:

1.  Декоратор класса:

~~~
@logged
class MyClass {
  // ...
}

function logged(target: Function) {
  console.log(`Class ${target.name} created.`);
}
~~~

В этом примере декоратор класса `logged` вызывается при создании класса `MyClass`.

2.  Декоратор метода:

```
class MyClass {
  @readonly
  method() {
    // ...
  }
}

function readonly(target: Object, propertyKey: string, descriptor: PropertyDescriptor) {
  descriptor.writable = false;
}
```

В этом примере декоратор метода `readonly` используется для установки свойства`writable` объекта `PropertyDescriptor` в `false`, чтобы метод нельзя было изменить после определения.

3.  Декоратор свойства:

```
class MyClass {
  @uppercase
  name: string = "John Doe";
}

function uppercase(target: Object, propertyKey: string) {
  let value = target[propertyKey];
  const getter = function() {
    return value.toUpperCase();
  };
  const setter = function(newValue) {
    value = newValue.toUpperCase();
  };
  Object.defineProperty(target, propertyKey, {
    get: getter,
    set: setter,
    enumerable: true,
    configurable: true,
  });
}
```

В этом примере декоратор свойства `uppercase` используется для изменения значения свойства `name` на `UpperCase`.

4.  Декоратор параметра функции:

```
function validate(target: Object, propertyKey: string, parameterIndex: number) {
  const originalMethod = target[propertyKey];
  target[propertyKey] = function(...args: any[]) {
    const arg = args[parameterIndex];
    if (!arg) {
      throw new Error(`Parameter ${parameterIndex} is required.`);
    }
    return originalMethod.apply(this, args);
  };
}

class MyClass {
  method(@validate arg: string) {
    // ...
  }
}
```

В этом примере декоратор параметра функции `validate` используется для проверки наличия аргумента `arg` при вызове метода `method`. Если аргумент не передан, генерируется исключение.