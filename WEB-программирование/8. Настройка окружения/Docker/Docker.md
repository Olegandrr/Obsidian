____

tags: #Docker

links: 

youtube: 
1. 

keywords:

_____
## Основы docker

#Docker - это набор инструментов, который позволяет упаковать приложение со всеми зависимостями в любой операционной системе. Например, БД, сервер и многое другое.

Контейнер. 
В контейнер можно что-о поместить (приложение с данными , операционную систему и прочее) и перемещать на нужные компьютеры.

Виртуализация
Docker использует возможности виртуализации на уровне контейнеров #Unix систем. Вы можете запускать любое количество контейнеров на одном компьютере. 

Виртуализация - это способ запускать несколько операционных систем внутри операционной системы #hosts 'а

Плюс docker
- Набор готовых решений для разработки
Docker имеет возможность предоставлять готовые образы для любого функционала (веб-сервер, БД MySQL).

Образ - это слепок (шаблон, чертёж), из которого собирается контейнер.
	Образ создается для реализации какого-то одного конкретного функционала (например, развернуть веб-сервер или базу данных)

Контейнер - это просто работающий образ (runtime)
	Контейнер - это запущенный образ или его instanse , который даёт возможность пользоваться всем предоставленным функционалом.
	Чтобы использовать функционал образа - нужно запустить контейнер на основе этого образа.

Репозиторий - хранит разные версии одного образа.

Реестр - место для хранения репозиториев (local - на личном компьютере, remote - общедоступный в интернете или на сервере) 

Daemon (служба) - процесс на хосте, который принимает команды, управляет docker компонентами и тд. Это фоновое сервис-приложение , которое составляет весь функционал docker.

Client - отправляет службы daemon докера , производит манипуляции , создаёт контейнеры , запускает и тд. С помощью клиента можно выполнять любые команды и работать с docker. Самый простой вариант клиента - командная строка.

Docker Engine собирает воедино весь функционал Docker : #Daemon + #Docker-CLI + #rest API + Extensions

- Изолированная среда выполнения
	Не затрагивает ОС и системные процессы.

![[Pasted image 20230524015047.png]]

Docker - клиент-серверное приложение. 

Клиент отправляет запрос Docker Host . Сервер обрабатывает запрос. 
Создаётся контейнер / образ . Создаётся #WSL .
Пришёл запрос docker pull он обрабатывается в docker daemon дальше отправляется запрос в локальное хранилище image , где обрабатывается локальные образы наши , если их не удаётся найти, запрос перенаправляется в реестр . 
Реестр - это как локальное , так и удаленное хранилище.

На основе этого образа, мы можем запускать любое количество контейнеров .

Например , нам нужно подключить БД к проекту через #Docker Используем #postgres в docker.  Разворачиваю postgres. Запускаю #ubuntu .

Исходя из этого, мы можем собрать любое приложение или веб-сайт.

hub.docker.com

## Виртуальные контейнеры

![[Pasted image 20230524020124.png]]

Виртуальные контейнер включает в единую операционную систему.

### Образ (Image)

Образ - шаблон для создания контейнеров (работающих образов)
Образ содержит необходимое для запуска: JVM , драйверы , инструменты , сценарии , библиотеки.

1 образ - 1 смысловое приложение
Например,, образ для развертывания веб сервера или образ для БД MySQL

Не нужно помещать несколько смыслов в один образ ( это можно сделать , но будет неудобно и возникнет путаница )

Статичность образа

Тот , кто пользуется образом - не может изменить файлы внутри образа , они недоступны для изменения . Можно подумать об образе docker , как о файлах, записанных на диске. Вы можете считать или использовать - но изменить не сможете.

### Docker Image

![[Pasted image 20230524021155.png]]

Docker image - это история до момента запуска . Контейнер во время .

### Layer (слой)

Каждый image образ , который собирается состоит из так называемых слоёв.

![[Pasted image 20230524021511.png]]

Собираются все необходимые системные файлы в контейнер (на линукс)

Все слои образа неизменяемы (block -- readonly)

Когда контейнер стартует , то создаётся отдельный слой.
То есть, каждый образ - это набор слоёв . Каждый слой - это набор файлов, или запуск скрипта . Базовый слой - запуск операционной системы . 

## setup docker

docs.docker.com >> install on Windows

Используем WSL 2 Backend . Устанавливаем WSL 2 PowerShell
```
wsl --install
```

Разница WSL и HYPER-V 
Hyper-V подходит под множество операционных систем (множество виртуальных машин на одном компьютере то использую это решение)

Устанавливаем docker на нашу ОС.

После установки запускаем Docker Desktop и проверяем его работу.

>> Службы Docker Desktop Servie (Общие / Тип запуска: автоматическая )

~~~
docker version
~~~

После этого можем запускать docker desktop и работать с ним

### Работа в Docker Desktop

В docker desktop есть следующие разделы:

![[Pasted image 20230524114345.png]]

1. Containers // Все консольные команды могут выполняться здесь
	Здесь будут отображаться все запушенные контейнеры.
2. Images //  Здесь будут отображаться скаченные образы.
![[Pasted image 20230524114732.png]]

3. Volumes // Здесь будут отображаться ваши папки .
4. Dev Environments // Создаются общие конфигурации и переменные, доступные для разных контейнеров.

Важно проверить, что в настройках в пункте Docker Engine отображается версия - это значит, что Docker Engine погрузился и готов к работе.

![[Pasted image 20230524115033.png]]

### Запуск контейнера docker








